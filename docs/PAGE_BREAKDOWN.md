# 📄 页面与功能模块拆解（实用版）

根据实地使用场景（扫码点餐 + Stripe 支付），本文件对每个页面的功能细节进行了精细拆解，特别考虑移动端体验与用户操作流程。

---

## 👤 用户端页面与功能

### `/menu` – 菜单浏览页
- 分类标签切换（热菜 / 饮料 / 小吃等）
- 搜索栏（支持拼音模糊搜索）
- 每道菜以卡片方式展示：
  - 图片、菜名、价格、售罄标记
  - 点击弹出详情弹窗（pop-up）

#### 🔽 菜品详情弹窗（模态框）
- 菜品大图、简介、单价
- **必选项**（如：辣度、尺寸）
- **可选项**（如：加蛋、加奶酪）
- **备注栏**（如：“少辣”“打包”）
- 添加至购物车按钮（自动关闭弹窗）

---

### `/cart` – 购物车页
- 展示所有已选菜品项（含配料和备注）
- 每项可修改数量、删除
- 总价计算（暂不含优惠逻辑）
- 清空购物车按钮
- 固定底部的“去结账”按钮

---

### `/checkout` – 结账页
- 展示订单摘要（菜品 + 配料 + 数量 + 价格）
- 输入：
  - 手机号（必填）
  - 姓名（必填）
- Stripe Checkout 支付跳转
- 失败处理：返回购物车页，保留订单草稿
- 成功处理：跳转 `/order-success`

---

### `/order-success` – 下单完成页
- 展示：
  - “感谢下单！”提示语
  - 总价、下单时间、订单编号
  - 固定提示：**下单后不可更改/取消，如需修改请前往前台**
  - 返回首页按钮

---

## 🧑‍💼 管理端页面与功能（需登录）

### `/admin/login`
- 邮箱 + 密码登录
- 登录成功后跳转 `/admin/menu`

---

### `/admin/menu`
- 表格视图：菜名 / 分类 / 是否售罄 / 操作按钮
- 操作支持：
  - 添加菜品（弹窗，含图片上传、选项设置）
  - 编辑 / 删除菜品
  - 设置菜品是否“上架 / 售罄”

---

### `/admin/orders`
- 列表展示订单：
  - 订单编号 / 顾客姓名 / 电话 / 总价 / 下单时间 / 当前状态
  - 状态变更按钮（制作中 → 完成）
- 实时轮询刷新（或 WebSocket）
- 支持搜索手机号或订单编号

---

### `/admin/revenue`（营收页面，后期开发）
- 展示订单总额统计（本日、本周、本月）
- 饼图展示菜品热度（可选）
- 数据导出（CSV）

---

## 🔐 系统通用功能模块

### 权限控制
- 管理页面使用 middleware.ts 限制访问（JWT 判断 isAdmin）
- 用户不需注册登录，只需结账时输入手机号和姓名

### 数据结构支持
- 每个订单含：
  - 多个菜品
  - 每道菜的选项组合
  - 备注信息

### 支付与状态管理
- 使用 Stripe Checkout 创建支付链接
- Stripe Webhook 回调更新订单状态（已支付）
- 未支付订单设定保留时间（如 15 分钟）

---

## 📌 保存路径建议

该文件建议保存在：
\`\`\`
/docs/PAGE_BREAKDOWN_REALISTIC.md
\`\`\`

主 README 中引用方式：
👉 [📄 页面功能详解](./docs/PAGE_BREAKDOWN_REALISTIC.md)
👉 [📄 API功能详解](./API_ROUTES.md)
